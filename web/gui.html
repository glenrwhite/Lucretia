<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
  <title>Lucretia: Graphical User Interface</title>
  <meta name="author" content="Peter Tenenbaum">
</head>
<body>
<div style="text-align: center;"><a
 href="http://www.slac.stanford.edu/accel/ilc/codes/Lucretia/"><span
 style="font-size: 24pt;"><img
 style="border: 0px solid ; width: 80px; height: 90px;"
 alt="LucretiaLogo" title="Lucretia home page" src="LucretiaLogo.gif"
 align="right" hspace="20"></span></a><span style="font-size: 24pt;"><br>
</span>
<div style="text-align: center;"><span style="font-size: 24pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
The <span style="color: rgb(214, 0, 147);">LUCRETIA</span>
Project</span><br>
</div>
<span style="font-size: 24pt;"><br>
<small>Graphical User Interface<br>
<br>
</small></span></div>
Lucretia has a graphical user interface (gui) Beamline Viewer, built using Matlab's App Designer. To invoke it, type<br>
<br>
<a name="BeamlineViewer"></a>&nbsp;&nbsp;&nbsp; <span
 style="font-family: Courier New,Courier,monospace;">BeamlineViewer</span><br>
<br>
at the Matlab prompt.&nbsp; What you should see (assuming that you have
defined the BEAMLINE cell array) is something like this example looking at the BEAMLINE lattice generated by the LucretiaTutorial script:<br>
<br>
<img style="width: 699px; height: 480px;" alt="BeamlineViewer Graphic"
 src="BeamlineViewer.jpg"><br>
<span style="font-weight: bold;"></span><br>
  Note: you may pass a character array as an input argument (e.g. <i>>>BeamlineViewer('MyDirectory')</i>). This indicates a directory (relative to the current
  working directory) which contains .mat files with other BEAMLINE arrays. This allows other BEAMLINE's to be loaded using the <i>File Menu</i>. The
  BEAMLINE directory definition can also be changed within the <i>File Menu</i>.
  <h2>BEAMLINE Element List</h2>
  The box on the lower left shows the fully instantiated lattice present in the Lucretia BEAMLINE cell array, displaying the BEAMLINE element
  number, S coordinate, Class, Section and name of the BEAMLINE element shown. Clicking on an element will highlight the appropriate entry in the right box
  area and also display a dashed line on the beamline element plot abvove. You can select a range of elements by holding down the <small>SHIFT</small> key between
  subsequent mouse clicks in this box area. This will select a range of elements, also depicted in the plot area above. You can cut other elements from display
  or consideration within the GUI by pushing the <small>RESIZE</small> button. Pushing the <small>RESET</small> button at any time restores the GUI to match the
  in-memory BEAMLINE array. You can search through the BEAMLINE elements by Name or Class by typing into the search box and using the up/down search buttons. You
  can repeat the search using multiple clicks on the up.down search buttons.<br><br>
  <h2>Database Viewer</h2>
  The lower right side box displays further database information depending on the selected Tab:
  <h3><i>Element Tab</i></h3>
  Structure field data for the selected BEAMLINE array selected in the lower-left box is shown, with additional information about the <i>TrackFlag</i> field shown
  on the right when appropriate.
  <h3><i>PS Tab</i></h3>
  If existing, a list of magnet Power Supply elements is displayed. Clicking on one of the PS entries highlights the BEAMLINE elements attached to this power supply
  in the left side box and displays fields of the PS element in the right-side text box.
  <h3><i>KLYSTRON Tab</i></h3>
  If existing, a list of Klystron elements is dispayed. Selection of a Klystron element highlights corresponding LCAV/TCAV class elements associated to this Klystron
  element on the left BEAMLINE text box area. Structure field information for this Klystron is also displayed in the text box to the left of the Klystron list.
  <h3><i>GIRDER Tab</i></h3>
  When a list of GIRDER elements is in memory, this tab presents a selectable list of Girder elements. Clicking on a Girder element highlights BEAMLINE elements associated
  with this Girder on the left and provides structure field information for this Girder in the box to the left of the Girder list.
  <h3><i>Initial Tab</i></h3>
  If the Matlab structure <i>Initial</i> is present in the Workspace when the GUI is launched, this Tab shows the assoicated fields. The field entries may be directly edited
  or a new <i>Initial</i> structure can be loaded by pushing the <i>Load from workspace</i> button. The Initial structure defines the initial beam conditions used
  to calculate the Twiss parameters.
  <h3><i>Sections Tab</i></h3>
  BEAMLINE sections are defined by Marker classes which start with characters <i>'BEG'</i> and <i>'END'</i>: e.g. <i>'BEGLINAC'</i> and <i>'ENDLINAC'</i> would define the
  det of elements defined as a Section called <i>'LINAC'</i>. Clicking on a Section in the list highlights the set of BEAMLINE elements corresponding to this section
  in the box on the left and also plots above. Clicking on a Section and then pushing the <small>RESIZE</small> button is a fast way to concentrate searches or other
  investigations on a smaller subset of the overall BEAMLINE.
  <h3><i>Classes Tab</i></h3>
  All the element Class types present in the BEAMLINE are shown in the list box. If required, use the <small>TOGGLE DISPLAY</small> button to omit or re-show elements
  of a given Class type from the elements shown in the BEAMLINE box on the left. All element classes are restored with the <small>DISPLAY ALL</small> button, or only the
  selected element Class type highlighted is shown (all others removed) with the <small>DISPLAY SINGLE</small> button. The status of whether a given Class type is
  selected for display or not is shown in the <small>DISPLAY</small> column (as indicated by '**' characters).

  <h2>Plot Window</h2>
  The plotting window is visible in the top box. If the <i>Layout</i> Tab is selected (default), the plot window displays either the x/z or y/z (selectable in the
  <i>Layout menu</i>) coordinates of all magnet and cavity BEAMLINE elements displayed in the lower-left text box. LCAV/TCAV elements are shown in yellow, quadrupole
  magnets in red, sextupoles in green and dipoles in blue. Solenoid magnets are also shown in magenta. Note that the BEAMLINE survey coordinates need to have been
  previously computed using the <i>SetFloorCoordinates</i> command for this display to function.<br>
  The Twiss Tab shows the Twiss parameters through the displayed BEAMLINE elements if an <i>Initial</i> structure is present. Beta function and dispersion function
  parameters can be shown (selectable in the <i>Twiss Menu</i> pulldown box).
</body>
</html>
